---
layout: default
---

{{ content }}

<script>
  // Dynamically add theme selector to the page
  document.addEventListener('DOMContentLoaded', function() {
    // Create theme selector element
    const themeSelector = document.createElement('div');
    themeSelector.className = 'theme-selector';
    themeSelector.id = 'theme-selector';
    themeSelector.innerHTML = `
      <button id="theme-light" title="Light Mode" aria-label="Switch to light mode">â˜€ï¸</button>
      <button id="theme-dark" title="Dark Mode" aria-label="Switch to dark mode">ğŸŒ™</button>
      <button id="theme-auto" title="Auto (System)" aria-label="Use system preference" class="active">ğŸ–¥ï¸</button>
    `;

    // Add to page (try to add to main content area)
    const main = document.querySelector('main') || document.querySelector('.main') || document.body;
    main.insertBefore(themeSelector, main.firstChild);

    // Theme management code
    const theme = {
      get current() {
        return localStorage.getItem('theme') || 'auto';
      },
      set current(value) {
        localStorage.setItem('theme', value);
        this.apply(value);
      },
      apply(theme) {
        const html = document.documentElement;
        const buttons = document.querySelectorAll('#theme-selector button');

        // Remove active class from all buttons
        buttons.forEach(btn => btn.classList.remove('active'));

        if (theme === 'auto') {
          // Use system preference
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          html.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
          document.getElementById('theme-auto').classList.add('active');
        } else {
          // Use explicit theme
          html.setAttribute('data-theme', theme);
          document.getElementById(`theme-${theme}`).classList.add('active');
        }
      },
      init() {
        // Apply current theme on load
        this.apply(this.current);

        // Set up button event listeners
        document.getElementById('theme-light').addEventListener('click', () => {
          this.current = 'light';
        });

        document.getElementById('theme-dark').addEventListener('click', () => {
          this.current = 'dark';
        });

        document.getElementById('theme-auto').addEventListener('click', () => {
          this.current = 'auto';
        });

        // Listen for system theme changes when in auto mode
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
          if (this.current === 'auto') {
            this.apply('auto');
          }
        });
      }
    };

    theme.init();
  });
</script>